<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title></title>
  <style type="text/css">

  </style>

</head>

<body>
  <div id="box">
  </div>
  <script type="text/javascript">
    // 非同步的作法
    // Promise.then((res) => {}).catch((e) => {});
    // //  假設a要跑一百萬次 換 B 做一樣動作
    // const t = Promise.resolve();
    // t.then(() => {
    //   a();
    // });
    // 倒數五秒跑awke up promise 
    const sleep = e => new Promise((resolve, reject) => {
      setTimeout(resolve, e * 1000);
    });

    console.log('sleep');
    sleep(5).then(() => {
      console.log('wake up')
    }).catch(() => {
      console.log('跑錯誤')
    });

    // async/ await
    const asyncRun = async () => {
      await sleep(5);
      console.log('await wake up')
    }

    asyncRun();

    // 撈資料寫法

    const url = 'https://jsonplaceholder.typicode.com/users/1';

    fetch(url).then(res => res.json())
      .catch(error => console.error('Error:', error))
      .then(response => {
        document.write(JSON.stringify(response));
        console.log('Success:', response)
      });

    // 範例寫法 Promise 跟 then
    new Promise((resolve, reject) => {
      resovle();
    }).then(() => {}).catch(() => {});

    // async寫法
    async (e) => {
      try {
        console.log(e);
      } catch (e) {
        console.log(e);
      }
    }

    // 回家作業
    
      const init = async () => {
        const res = await fetch('https://jsonplaceholder.typicode.com/users');
        const data = await res.json();
        console.log(res.json());
        for (let ref = 0; ref <= data.length; ref++) {
          document.write(JSON.stringify(data[ref].name) + '<br>')
        }
      };

      init();

      // console.log(name) = 要出現十筆資料
      // const name = 要出現十筆資料


      const init = async () => {
        const res = await fetch('https://jsonplaceholder.typicode.com/users')
        const data = await res.json()
        //{此括號代表DATA解構}
        data.map(({name})=>{
          document.write(JSON.stringify(name));
        });
      };
      init();

      // 小作業

      
  </script>
</body>

</html>